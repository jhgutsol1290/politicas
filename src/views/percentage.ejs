<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Políticas Públicas</title>
    <%- include("partials/head")%>
    <link href= "/assets/css/background.css" rel="stylesheet">

        <!--CDN CHARTJS-->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

        <!--jQuery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
</head>
<body>
  <div class="container pt-4 mt-5">
    <div class="row">
      <div class="col-sm-2">
            <a href="/pages/1">
              <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> Todas </button>
            </a>
      </div>
      <div class="col-sm-2">
          <a href="/filter/Rota">
            <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> Rotas</button>
          </a>
      </div>
      <div class="col-sm-2">
          <a href="/filter/SinIniciar">
            <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> Sin Iniciar</button>
          </a>
      </div>
      <div class="col-sm-2">
          <a href="/filter/EnProceso">
            <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> En Proceso</button>
          </a>
      </div>
      <div class="col-sm-2">
          <a href="/filter/Cumplida">
            <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> Cumplidas</button>
          </a>
      </div>
      <div class="col-sm-2">
        <a href="/percentage">
          <button class="btn btn-info btn-block"><i class="fas fa-filter"></i></i> Ver Cifras</button>
        </a>
    </div>
      </div>
    </div>
  </div>

 

  <% var cont1 = 0; %>
  <% var cont2 = 0; %>
  <% var cont3 = 0; %>
  <% var cont4 = 0; %>
  <% var cont5 = 0; %>
  <% var cont6 = 0; %>
  <% var cont7 = 0; %>
  <% var cont8 = 0; %>
  <% var cont9 = 0; %>
  <% var cont10 = 0; %>
  <%images.map(function(image, index){%>
    <% if(image.status === 'Rota'){%>
        <% cont1 = cont1 + 1 %>
    <%} else if(image.status === 'Sin iniciar'){%>
        <% cont2 = cont2 + 1 %>
    <%} else if(image.status === 'En proceso'){%>
        <% cont3 = cont3 + 1 %>
    <%} else if(image.status === 'Cumplida'){%>
        <% cont4 = cont4 + 1 %>
    <%}%>
    <% cont5 = index + 1 %>

    <% cont6 = (cont1*100)/cont5 %>
    <% cont7 = (cont2*100)/cont5 %>
    <% cont8 = (cont3*100)/cont5 %>
    <% cont9 = (cont4*100)/cont5 %>
    <% cont10 = (cont5*100)/cont5 %>
  <%})%>

  <div class="container mt-5 text-center animated bounceInUp">
      <div class="row">
          <div class="col-md-12">
            <table class="table">
                <thead class="thead text-white" style="background-color: #051c48;">
                  <tr>
                    <th scope="col">Status</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Porcentaje de Cumplimiento</th>
                  </tr>
                </thead>
                <tbody>
                <tr class="table-danger">
                    <th scope="row">Rotas</th>
                    <td id="cont1"><%- cont1  %></td>
                    <td><%- cont6  %> %</td>
                </tr>
                  <tr class="table-secondary">
                    <th scope="row">Sin Iniciar</th>
                    <td id="cont2"><%- cont2  %></td>
                    <td><%- cont7  %> %</td>
                  </tr>
                  <tr class="table-warning">
                    <th scope="row">En proceso</th>
                    <td id="cont3"><%- cont3  %></td>
                    <td><%- cont8  %> %</td>
                  </tr>
                  <tr class="table-success">
                    <th scope="row">Cumplidas</th>
                    <td id="cont4"><%- cont4  %></td>
                    <td><%- cont9  %> %</td>
                  </tr>
                  <tr class="table-dark">
                    <th scope="row">Total</th>
                    <td id="cont5"><%- cont5  %></td>
                    <td><%- cont10  %> %</td>
                  </tr>
                </tbody>
              </table>
          </div>
      </div>
  </div>

  <div class="container" style="width: 45%;">
		<canvas id="canvas"></canvas>
  </div>

<script src="/assets/js/graphs.js"></script>
</body>
</html>